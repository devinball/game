<html>
<head>
<style>

</style>
</head>
<body onkeydown="move(event);" >
  <img id="player1" src="BB8.png" style="position:absolute;left:0px;top:0px;" />
  <img id="player2" src="r2d2.jpg" style="position:absolute;left:100px;top:0px;" /> 
 <img id="npc" src="123.png" style "position:absolute;left:100px;top:0px;"/>  <div id="worlds-list"></div>
  <script>
  var bb8 = document.getElementById("player1");
  var r2d2 = document.getElementById("player2");
  var rotation = 0;

  function up(character){
    character.style.top = parseInt(character.style.top, 10) - 10;
  }

  function left(character){
    character.style.left = parseInt(character.style.left, 10) - 10;
  }

  function down(character){
    character.style.top = parseInt(character.style.top, 10) + 10;
  }

  function right(character){
    character.style.left = parseInt(character.style.left, 10) + 10;
  }

  function move(e){
    console.log(e.which);  
    switch(e.which){

      // BB8
      case 38: // up arrow
        up(bb8);
        break;

      case 40: // down arrow
        down(bb8);
        break;

      case 37: // left arrow
        left(bb8);
        break;
      
      case 39: // right arrow
        right(bb8);
        break;
      
      case 32: // space bar 
        rotation = rotation + 10;
        bb8.style.transform = "rotate(" + rotation + "deg)";
        break;

      // R2D2
      case 87: // w - up
        up(r2d2);
        break;

      case 83: // s - down
        down(r2d2);
        break;

      case 65: // a - left
        left(r2d2);
        break; 
      
      case 68: // d - right
        right(r2d2);
        break;
    }
  }
  
  function randomInt(max){
    return;
  }
  
  function moveNpc(){
    var direction = randomInt(4);
    switch (direction){
      case 0:
      left(npc);
    }
  }
  
  setInterval("moveNpc()", 500);

  </script>

  <script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>

  <script type="text/javascript">

  var worldsUrl = "https://shining-torch-8736.firebaseio.com/worlds";

  var worldsRef = new Firebase(worldsUrl);
  var myWorldRef = new Firebase(worldsUrl + "/droids");

  myWorldRef.set(
     {
       name: "Droids",
       worldUrl: "http://"
     }
  );

  var worlds = {};

  worldsRef.on("child_added", function(data) {
   worlds[data.key()] = data.val();
   updateWorlds();
  });

  function updateWorlds(){
   $('#worlds-list').html(_.map(worlds, function(world){return world.name + "<br/>"}));
  }
  </script>


</body>
</html>